
# OSI模型
OSI（开放式系统互连参考模型）是一种通信协议的7层抽象的参考模型，其中每一层执行某一特定任务。该模型的目的是使各种硬件在相同的层次上相互通信。 分为七层结构：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。TCP/IP协议并不完全符合OSI。 



# TCP/IP协议栈

TCP/IP 协议栈是一系列网络协议的总和，是构成网络通信的核心骨架，它定义了电子设备如何连入因特网，以及数据如何在它们之间进行传输。TCP/IP 协议采用4层结构：应用层、传输层、网络层、链路层。

|   4层模型   | 相关的网络协议 | 职责 |
| ---- | ---- | ---- |
| 链路层 | ARP（地址解析协议） | 对0和1进行分组，定义数据帧，确认主机的物理地址，传输数据。 |
| 网络层 | IP（网际协议）、ICMP（互联网控制报文协议） | 定义IP地址，确认主机所在的网络位置，并通过IP进行MAC寻址，对外网数据包进行路由转发。 |
| 传输层 | TCP（传输控制协议）、UDP（用户数据报协议） | 定义端口，确认主机上应用程序的身份，并将数据包交给对应的应用程序。 |
| 应用层 | HTTP、NTP、DNS、TELNET、FTP、TFTP、SMTP、RTSP、P2P | 定义数据格式，并按照对应的格式解读数据。 |

[深入浅出 TCP/IP 协议栈](https://www.cnblogs.com/onepixel/p/7092302.html) 总结：当你输入一个网址并按下回车键的时候，首先，应用层协议对该请求包做了格式定义；紧接着传输层协议加上了双方的端口号，确认了双方通信的应用程序；然后网络协议加上了双方的IP地址，确认了双方的网络位置；最后链路层协议加上了双方的MAC地址，确认了双方的物理位置，同时将数据进行分组，形成数据帧，采用广播方式，通过传输介质发送给对方主机。而对于不同网段，该数据包首先会转发给网关路由器，经过多次转发后，最终被发送到目标主机。目标机接收到数据包后，采用对应的协议，对帧数据进行组装，然后再通过一层一层的协议进行解析，最终被应用层的协议解析并交给服务器处理。

[当你输入一个网址](https://www.cnblogs.com/wenanry/archive/2010/02/25/1673368.html)



# 应用层协议

HTTP协议（超文本传输协议）、NTP协议（网络时间协议）、TELNET协议（虚拟终端协议）、DNS协议(域名解析协议)、FTP协议（文件传输协议）、TFTP协议（简单文件传输协议）、SNMP协议（简单网络管理协议）、SMTP协议（简单邮件传输协议）、POP协议（邮局协议）、RTSP（实时流传输协议）、DHCP（动态主机配置协议）、P2P



# TCP的三次握手/四次挥手

![](http://dl2.iteye.com/upload/attachment/0077/6058/5d4e8c89-fc42-3862-bdb8-399bc982f410.png)

[TCP的三次握手与四次挥手](https://blog.csdn.net/qzcsu/article/details/72861891)

* CLOSE_WAIT状态 
发起TCP连接关闭的一方称为client，被动关闭的一方称为server。被动关闭的server收到FIN后，但未发出ACK的TCP状态是CLOSE_WAIT。出现这种状况一般都是由于server端代码的问题，如果你的服务器上出现大量CLOSE_WAIT，应该要考虑检查代码。
* TIME_WAIT状态 
根据TCP协议定义的3次握手断开连接规定,发起socket主动关闭的一方 socket将进入TIME_WAIT状态。TIME_WAIT状态将持续2个MSL(Max Segment Lifetime),在Windows下默认为4分钟，即240秒。TIME_WAIT状态下的socket不能被回收使用. 具体现象是对于一个处理大量短连接的服务器,如果是由服务器主动关闭客户端的连接，将导致服务器端存在大量的处于TIME_WAIT状态的socket， 甚至比处于Established状态下的socket多的多,严重影响服务器的处理能力，甚至耗尽可用的socket，停止服务。
* 统计TCP连接情况：`netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}' `  

# HTTPS

超文本传输安全协议（英语：Hypertext Transfer Protocol Secure，缩写：HTTPS，常称为HTTP over TLS，HTTP over SSL或HTTP Secure）是一种网络安全传输协议。具体介绍以前先来介绍一下以前常见的HTTP，HTTP就是我们平时浏览网页时候使用的一种协议。HTTP协议传输的数据都是未加密的，也就是明文，因此使用HTTP协议传输隐私信息非常不安全。HTTP使用80端口通讯，而HTTPS占用443端口通讯。在计算机网络上，HTTPS经由超文本传输协议（HTTP）进行通信，但利用SSL/TLS来加密数据包。HTTPS开发的主要目的，是提供对网络服务器的身份认证，保护交换数据的隐私与完整性。这个协议由网景公司（Netscape）在1994年首次提出，随后扩展到互联网上。

- [HTTP 状态码](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Response_codes)
- [HTTPS协议、TLS协议、证书认证过程解析](https://www.cnblogs.com/snowater/p/7804889.html)
- [HTTPS原理与证书生成](https://itimetraveler.github.io/2018/10/30/HTTPS%E5%8E%9F%E7%90%86%E4%B8%8E%E8%AF%81%E4%B9%A6/#TLS%E5%8E%86%E5%8F%B2)
- [Https单向认证和双向认证](https://blog.csdn.net/duanbokan/article/details/50847612)



# 鉴权

[4种常见的鉴权方式](https://blog.csdn.net/sinat_33255495/article/details/103920131)



# 证书

> 证书用来证明公钥拥有者身份的凭证

.crt 表示证书

.key 表示私钥

.req 表示请求文件；.csr 也表示请求文件

.pem 表示 pem 格式；.der 表示 der 格式



# IP地址

* IP地址分A、B、C、D、E五类，其中A、B、C这三类是比较常用的IP地址，D、E类为特殊地址。  
* 在计算机网络中，主机ID全部为0的地址为网络地址，而主机ID全部为1的地址为广播地址，这2个地址是不能分配给主机用的。
* 两台主机要通信，首先要判断是否处于同一网段，即网络地址是否相同。如果相同则把数据包直接发送到目标主机；否则就需要路由网关将数据包转发送到目的地。
* 网关就是到其他网段的出口，也就是路由器接口IP地址。

IP地址 | 掩码 | 最高位 | 范围
--- | --- | --- | ---
A类地址 | 255.0.0.0 | 0 | 1.0.0.0 - 127.255.255.255
B类地址 | 255.255.0.0 | 10 | 128.0.0.0 - 191.255.255.255
C类地址 | 255.255.255.0 | 110 | 192.0.0.0 - 223.255.255.255



# Wireshark&TcpDump

[Wireshark学习](https://www.kancloud.cn/digest/wireshark/62470)

[Wireshark基本介绍和学习TCP三次握手](https://www.cnblogs.com/TankXiao/archive/2012/10/10/2711777.html)  





主机字节序又叫 CPU 字节序，其不是由操作系统决定的，而是由 CPU 指令集架构决定的。

数据存放到内存，都是由低地址到高地址。32 位整数 `0x12345678` 是从起始位置为 `0x00` 的地址开始存放，则：

| 内存地址 | 0x00 | 0x01 | 0x02 | 0x03 |
| -------- | ---- | ---- | ---- | ---- |
| 大端     | 12   | 34   | 56   | 78   |
| 小端     | 78   | 56   | 34   | 12   |

* 大端：先存储高位字节数据  ARM、IBM大型机
* 小端：先存储低位字节数据  Intel
